/* https://github.com/micmro/performance-bookmarklet by Michael Mrowetz @MicMro
   build:06/04/2015 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=c(a("../data")),e=(c(a("../helpers/helpers")),c(a("../helpers/svg"))),f=c(a("../helpers/dom")),g=c(a("../helpers/tableLogger")),h={};h.init=function(){var a={pageLoadTime:d.perfTiming.loadEventEnd-d.perfTiming.navigationStart,output:[]},b=d.perfTiming.navigationStart;for(var c in d.perfTiming)d.perfTiming[c]&&"number"==typeof d.perfTiming[c]&&(a[c]=d.perfTiming[c]-b,a.output.push({name:c,"time (ms)":d.perfTiming[c]-b}));a.output.sort(function(a,b){return(a["time (ms)"]||0)-(b["time (ms)"]||0)});var h=function(a,b,c,d){return{name:a,start:b,end:c,total:"number"!=typeof b||"number"!=typeof c?void 0:c-b,colour:d}};a.blocks=[h("Total",0,a.pageLoadTime,"#ccc"),h("Unload",a.unloadEventStart,a.unloadEventEnd,"#909"),h("Redirect ("+performance.navigation.redirectCount+"x)",a.redirectStart,a.redirectEnd,"#ffff60"),h("App cache",a.fetchStart,a.domainLookupStart,"#1f831f"),h("DNS",a.domainLookupStart,a.domainLookupEnd,"#1f7c83"),h("TCP",a.connectStart,a.connectEnd,"#e58226"),h("Timer to First Byte",a.requestStart,a.responseStart,"#1fe11f"),h("Response",a.responseStart,a.responseEnd,"#1977dd"),h("DOM Processing",a.domLoading,a.domComplete,"#9cc"),h("domContentLoaded Event",a.domContentLoadedEventStart,a.domContentLoadedEventEnd,"#d888df"),h("onload Event",a.loadEventStart,a.loadEventEnd,"#c0c0ff")],a.secureConnectionStart&&a.blocks.push(h("SSL",a.connectStart,a.secureConnectionStart,"#c141cd")),a.msFirstPaint&&a.blocks.push(h("msFirstPaint Event",a.msFirstPaint,a.msFirstPaint,"#8FBC83")),a.domInteractive&&a.blocks.push(h("domInteractive Event",a.domInteractive,a.domInteractive,"#d888df")),!a.redirectEnd&&!a.redirectStart&&a.fetchStart>a.navigationStart&&a.blocks.push(h("Cross-Domain Redirect (and/or other Delay)",a.navigationStart,a.fetchStart,"#ffff60")),a.blocks.push(h("Network/Server",a.navigationStart,a.responseStart,"#8cd18c")),d.measures.forEach(function(b){a.blocks.push(h("measure:"+b.name,Math.round(b.startTime),Math.round(b.startTime+b.duration),"#f00"))});var i=function(){var b=a.pageLoadTime/100,c=a.blocks.filter(function(a){return"number"==typeof a.start&&"number"==typeof a.total}).sort(function(a,b){return(a.start||0)-(b.start||0)}),g=d.marks.length>0?d.marks.reduce(function(a,b){return Math.max("number"==typeof a?a:0,e.getNodeTextWidth(e.newTextEl(b.name,"0")))}):0,h=25*(c.length+1),i=h+g+35,j=f.newTag("section",{"class":"navigation-timing water-fall-holder chart-holder"}),k=e.newEl("svg:svg",{height:Math.floor(i),"class":"water-fall-chart"}),l=e.newEl("g",{"class":"labels"}),m=e.newEl("line",{x1:"0",y1:"0",x2:"0",y2:h,"class":"line-end"}),n=e.newEl("line",{x1:"0",y1:"0",x2:"0",y2:h,"class":"line-start"}),o=function(a){var b=a.target;f.addClass(b,"active");var c=b.x.baseVal.valueInSpecifiedUnits+b.width.baseVal.valueInSpecifiedUnits+"%",d=b.x.baseVal.valueInSpecifiedUnits+"%";m.x1.baseVal.valueAsString=c,m.x2.baseVal.valueAsString=c,n.x1.baseVal.valueAsString=d,n.x2.baseVal.valueAsString=d,f.addClass(m,"active"),f.addClass(n,"active"),b.parentNode.appendChild(m),b.parentNode.appendChild(n)},p=function(a){f.removeClass(a.target,"active"),f.removeClass(m,"active"),f.removeClass(n,"active")},q=function(a,c,d,f,g,h){var i=e.newEl("rect",{width:a/b+"%",height:c,x:d/b+"%",y:f,fill:g,"class":"time-block"});return h&&i.appendChild(e.newEl("title",{text:h})),i.addEventListener("mouseenter",o),i.addEventListener("mouseleave",p),i},r=function(){for(var b=e.newEl("g",{"class":"time-scale full-width"}),c=0,d=a.pageLoadTime/1e3,f=100/d;d>=c;c++){var g=e.newTextEl(c+"sec",h);c>d-.2?(g.setAttribute("x",f*c-.5+"%"),g.setAttribute("text-anchor","end")):g.setAttribute("x",f*c+.5+"%");var i=e.newEl("line",{x1:f*c+"%",y1:"0",x2:f*c+"%",y2:h});b.appendChild(i),b.appendChild(g)}return b},s=function(){var a=e.newEl("g",{transform:"scale(1, 1)","class":"marker-holder"});return d.marks.forEach(function(c,g){var i=e.newEl("g",{"class":"mark-holder"}),j=e.newEl("g",{"class":"line-holder"}),k=c.startTime/b;c.x=k;var l=e.newTextEl(c.name,h+25);l.setAttribute("writing-mode","tb"),l.setAttribute("x",k+"%"),l.setAttribute("stroke",""),j.appendChild(e.newEl("line",{x1:k+"%",y1:"0px",x2:k+"%",y2:h})),d.marks[g-1]&&c.x-d.marks[g-1].x<1&&(l.setAttribute("x",d.marks[g-1].x+1+"%"),c.x=d.marks[g-1].x+1),j.appendChild(e.newEl("line",{x1:k+"%",y1:h,x2:c.x+"%",y2:h+23})),i.addEventListener("mouseenter",function(){f.addClass(j,"active"),i.parentNode.appendChild(i)}),i.addEventListener("mouseleave",function(){f.removeClass(j,"active")}),i.appendChild(e.newEl("title",{text:c.name+" ("+Math.round(c.startTime)+"ms)"})),i.appendChild(j),i.appendChild(l),a.appendChild(i)}),a};return k.appendChild(r()),k.appendChild(s()),c.forEach(function(a,c){var d=a.total||1,f=25*c;k.appendChild(q(d,25,a.start||.001,f,a.colour,a.name+" ("+a.start+"ms - "+a.end+"ms | total: "+a.total+"ms)"));var g=e.newTextEl(a.name+" ("+a.total+"ms)",f+18);(a.total||1)/b>10?(g.setAttribute("class","inner-label"),g.setAttribute("x",(a.start||.001)/b+.5+"%"),g.setAttribute("width",d/b+"%")):(a.start||.001)/b+d/b<80?g.setAttribute("x",(a.start||.001)/b+d/b+.5+"%"):(g.setAttribute("x",(a.start||.001)/b-.5+"%"),g.setAttribute("text-anchor","end")),l.appendChild(g)}),k.appendChild(l),j.appendChild(f.newTag("h1",{text:"Navigation Timing"})),j.appendChild(k),j};return g.logTables([{name:"Navigation Timeline",data:a.blocks,columns:["name","start","end","total"]},{name:"Navigation Events",data:a.output},{name:"Marks",data:d.marks,columns:["name","startTime","duration"]}]),i()},b.exports=h},{"../data":6,"../helpers/dom":7,"../helpers/helpers":8,"../helpers/svg":11,"../helpers/tableLogger":12}],2:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=c(a("../data")),e=c(a("../helpers/helpers")),f=c(a("../helpers/svg")),g=c(a("../helpers/dom")),h=c(a("../helpers/tableLogger")),i={};i.init=function(){function a(a,b){var c=f.newEl("svg:svg",{viewBox:"0 0 "+b+" "+b,"class":"pie-chart"},"max-height:"+(.98*window.innerWidth-64)/3+"px;"),d=2*Math.PI/100,g=0,h=function(a,b,c,e,h){var i=b/2,j=g+(c*d-.001),k=g+(c/2*d-.001),l=i+i*Math.sin(g),m=i-i*Math.cos(g),n=i+i*Math.sin(j),o=i-i*Math.cos(j),p=i+.85*i*Math.sin(k),q=i-.85*i*Math.cos(k),r=j-g>Math.PI?1:0,s="M "+i+","+i+" L "+l+","+m+" A "+i+","+i+" 0 "+r+" 1 "+n+","+o+" Z",t=f.newEl("path",{id:a,d:s,fill:h});if(t.appendChild(f.newEl("title",{text:e})),t.addEventListener("mouseenter",function(a){a.target.style.opacity="0.5",a.target.ownerDocument.getElementById(a.target.getAttribute("id")+"-table").style.backgroundColor="#ccc"}),t.addEventListener("mouseleave",function(a){a.target.style.opacity="1",a.target.ownerDocument.getElementById(a.target.getAttribute("id")+"-table").style.backgroundColor="transparent"}),g=j,c>10){var u=f.newTextEl(e,q);return k<Math.PI?u.setAttribute("x",p-f.getNodeTextWidth(u)):u.setAttribute("x",p),{path:t,wedgeLabel:u}}return{path:t}},i=f.newEl("g",{},"pointer-events:none; font-weight:bold;"),j=f.newEl("g");return a.forEach(function(a){var c=h(a.id,b,a.perc,a.label+" ("+a.count+")",a.colour||e.getRandomColor());j.appendChild(c.path),c.wedgeLabel&&i.appendChild(c.wedgeLabel)}),j.appendChild(f.newEl("circle",{cx:b/2,cy:b/2,r:.05*b,fill:"#fff"})),c.appendChild(j),c.appendChild(i),c}var b=function(a,b,c){return c=c||[{name:"Requests",field:"count"}],g.tableFactory("",function(b){return b.appendChild(g.newTag("th",{text:a,"class":"text-left"})),c.forEach(function(a){b.appendChild(g.newTag("th",{text:a.name,"class":"text-right"}))}),b.appendChild(g.newTag("th",{text:"Percentage","class":"text-right"})),b},function(a){return b.forEach(function(b){var d=g.newTag("tr",{id:b.id+"-table"});d.appendChild(g.newTag("td",{text:b.label})),c.forEach(function(a){d.appendChild(g.newTag("td",{text:b[a.field],"class":"text-right"}))}),d.appendChild(g.newTag("td",{text:b.perc.toPrecision(2)+"%","class":"text-right"})),a.appendChild(d)}),a})},c=d.allResourcesCalc.filter(function(a){return 0===a.name.indexOf("http")&&!a.name.match(/js.map$/)}),i=e.getItemCount(c.map(function(a){return a.initiatorType||a.fileExtension}),"initiatorType"),j=e.getItemCount(c.map(function(a){return(a.initiatorType||a.fileExtension)+" "+(a.isRequestToHost?"(host)":"(external)")}),"initiatorType"),k=e.getItemCount(c.map(function(a){return a.domain}),"domain"),l=e.getItemCount(c.map(function(a){return a.fileType+" "+(a.isRequestToHost?"(host)":"(external)")}),"fileType"),m=e.getItemCount(c.map(function(a){return a.fileType}),"fileType");c.forEach(function(a){var b=k.filter(function(b){return b.domain==a.domain})[0]||{};b.durationTotal=(b.durationTotal||0)+a.duration});var n=c.filter(function(a){return a.domain===location.host}).length,o=g.newTag("div",{"class":"pie-charts-holder chart-holder"}),p=function(d,e,f,h){var i=g.newTag("div",{"class":"pie-chart-holder"});i.appendChild(g.newTag("h1",{text:d})),i.appendChild(a(e,400)),i.appendChild(g.newTag("p",{text:"Total Requests: "+c.length})),f&&f.length&&f.forEach(function(a){i.appendChild(g.newTag("p",{text:a},"margin-top:-1em"))}),i.appendChild(b(d,e,h)),o.appendChild(i)},q=c.length/100,r="789abcdef",s="789abcdef",t="789abcdef",u=k.map(function(a){return a.perc=a.count/q,a.label=a.domain,a.colour=a.domain===location.host?"#0c0":a.domain.split(".").slice(-2).join(".")===location.host.split(".").slice(-2).join(".")?"#0a0":e.getRandomColor("56789abcdef","01234567","abcdef"),a.id="reqByDomain-"+a.label.replace(/[^a-zA-Z]/g,"-"),a.durationAverage=Math.round(a.durationTotal/a.count),a});return p("Requests by Domain",u,["Domains Total: "+k.length],[{name:"Requests",field:"count"},{name:"Avg. Duration (ms)",field:"durationAverage"}]),p("Requests by Initiator Type",i.map(function(a){return a.perc=a.count/q,a.label=a.initiatorType,a.colour=e.getInitiatorTypeColour(a.initiatorType,e.getRandomColor(r,s,t)),a.id="reqByInitiatorType-"+a.label.replace(/[^a-zA-Z]/g,"-"),a})),p("Requests by Initiator Type (host/external domain)",j.map(function(a){var b=a.initiatorType.split(" ");return a.perc=a.count/q,a.label=a.initiatorType,a.colour=e.getInitiatorTypeColour(b[0],e.getRandomColor(r,s,t),"(host)"!==b[1]),a.id="reqByInitiatorTypeLocEx-"+a.label.replace(/[^a-zA-Z]/g,"-"),a}),["Requests to Host: "+n,"Host: "+location.host]),p("Requests by File Type",m.map(function(a){return a.perc=a.count/q,a.label=a.fileType,a.colour=e.getFileTypeColour(a.fileType,e.getRandomColor(r,s,t)),a.id="reqByFileType-"+a.label.replace(/[^a-zA-Z]/g,"-"),a})),p("Requests by File Type (host/external domain)",l.map(function(a){var b=a.fileType.split(" ");return a.perc=a.count/q,a.label=a.fileType,a.colour=e.getFileTypeColour(b[0],e.getRandomColor(r,s,t),"(host)"!==b[1]),a.id="reqByFileType-"+a.label.replace(/[^a-zA-Z]/g,"-"),a}),["Requests to Host: "+n,"Host: "+location.host]),h.logTables([{name:"Requests by domain",data:k},{name:"Requests by Initiator Type",data:i,columns:["initiatorType","count","perc"]},{name:"Requests by Initiator Type (host/external domain)",data:j,columns:["initiatorType","count","perc"]},{name:"Requests by File Type",data:m,columns:["fileType","count","perc"]}]),o},b.exports=i},{"../data":6,"../helpers/dom":7,"../helpers/helpers":8,"../helpers/svg":11,"../helpers/tableLogger":12}],3:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=c(a("../data")),e=c(a("../helpers/helpers")),f=c(a("../helpers/svg")),g=c(a("../helpers/dom")),h={};h.init=function(){var a={pageLoadTime:d.perfTiming.loadEventEnd-d.perfTiming.responseStart,lastResponseEnd:d.perfTiming.loadEventEnd-d.perfTiming.responseStart};for(var b in d.perfTiming)d.perfTiming[b]&&"number"==typeof d.perfTiming[b]&&(a[b]=d.perfTiming[b]-d.perfTiming.navigationStart);var c=function(a,b,c,d){return{name:a,start:b,end:c,total:"number"!=typeof b||"number"!=typeof c?void 0:c-b,colour:d}},h=function(a,b,c,d,e,f){return{name:a,start:b,end:c,total:"number"!=typeof b||"number"!=typeof c?void 0:c-b,colour:d,segments:e,rawResource:f}},i=function(a,b,c){var d=g.newTag("div",{"class":"legend-holder"});d.appendChild(g.newTag("h4",{text:b}));var e=g.newTag("dl",{"class":"legend "+a});return c.forEach(function(a){e.appendChild(g.newTag("dt",{"class":"colorBoxHolder",childElement:g.newTag("span",{},"background:"+a[1])})),e.appendChild(g.newTag("dd",{text:a[0]}))}),d.appendChild(e),d},j=[c("Unload",a.unloadEventStart,a.unloadEventEnd,"#909"),c("Redirect",a.redirectStart,a.redirectEnd,"#ffff60"),c("App cache",a.fetchStart,a.domainLookupStart,"#1f831f"),c("DNS",a.domainLookupStart,a.domainLookupEnd,"#1f7c83"),c("TCP",a.connectStart,a.connectEnd,"#e58226"),c("Timer to First Byte",a.requestStart,a.responseStart,"#1fe11f"),c("Response",a.responseStart,a.responseEnd,"#1977dd"),c("DOM Processing",a.domLoading,a.domComplete,"#9cc"),c("domContentLoaded Event",a.domContentLoadedEventStart,a.domContentLoadedEventEnd,"#d888df"),c("Onload Event",a.loadEventStart,a.loadEventEnd,"#c0c0ff")];a.secureConnectionStart&&j.push(c("SSL",a.connectStart,a.secureConnectionStart,"#c141cd")),a.msFirstPaint&&j.push(c("msFirstPaint Event",a.msFirstPaint,a.msFirstPaint,"#8FBC83")),a.domInteractive&&j.push(c("domInteractive Event",a.domInteractive,a.domInteractive,"#d888df")),!a.redirectEnd&&!a.redirectStart&&a.fetchStart>a.navigationStart&&j.push(c("Cross-Domain Redirect",a.navigationStart,a.fetchStart,"#ffff60")),a.blocks=[h("Navigation API total",0,a.loadEventEnd,"#ccc",j)],d.allResourcesCalc.forEach(function(b){var d=[c("Redirect",b.redirectStart,b.redirectEnd,"#ffff60"),c("DNS Lookup",b.domainLookupStart,b.domainLookupEnd,"#1f7c83"),c("Initial Connection (TCP)",b.connectStart,b.connectEnd,"#e58226"),c("secureConnect",b.secureConnectionStart||void 0,b.connectEnd,"#c141cd"),c("Timer to First Byte",b.requestStart,b.responseStart,"#1fe11f"),c("Content Download",b.responseStart||void 0,b.responseEnd,"#1977dd")],f=[0,b.redirectStart,b.domainLookupStart,b.connectStart,b.secureConnectionStart,b.requestStart,b.responseStart],g=f.reduce(function(a,c){return c>0&&(a>c||0>=a)&&c!=b.startTime?c:a});b.startTime<g&&d.unshift(c("Stalled/Blocking",b.startTime,g,"#cdcdcd")),a.blocks.push(h(b.name,Math.round(b.startTime),Math.round(b.responseEnd),e.getInitiatorTypeColour(b.initiatorType),d,b)),a.lastResponseEnd=Math.max(a.lastResponseEnd,b.responseEnd)}),a.loadDuration=Math.round(a.lastResponseEnd);var k=function(a,b){var c=a/100,e=b.filter(function(a){return"number"==typeof a.start&&"number"==typeof a.total}).sort(function(a,b){return(a.start||0)-(b.start||0)}),h=d.marks.length>0?d.marks.reduce(function(a,b){return Math.max("number"==typeof a?a:0,f.getNodeTextWidth(f.newTextEl(b.name,"0")))}):0,j=25*(e.length+1),k=j+h+35,l=g.newTag("section",{"class":"resource-timing water-fall-holder chart-holder"}),m=f.newEl("svg:svg",{height:Math.floor(k),"class":"water-fall-chart"}),n=f.newEl("g",{"class":"labels"}),o=f.newEl("line",{x1:"0",y1:"0",x2:"0",y2:j,"class":"line-end"}),p=f.newEl("line",{x1:"0",y1:"0",x2:"0",y2:j,"class":"line-start"}),q=function(a){var b=a.target;g.addClass(b,"active");var c=b.x.baseVal.valueInSpecifiedUnits+b.width.baseVal.valueInSpecifiedUnits+"%",d=b.x.baseVal.valueInSpecifiedUnits+"%";o.x1.baseVal.valueAsString=c,o.x2.baseVal.valueAsString=c,p.x1.baseVal.valueAsString=d,p.x2.baseVal.valueAsString=d,g.addClass(o,"active"),g.addClass(p,"active"),b.parentNode.appendChild(o),b.parentNode.appendChild(p)},r=function(a){g.removeClass(a.target,"active"),g.removeClass(o,"active"),g.removeClass(p,"active")},s=function(a){var b=function(){return a.apply(this,arguments)};return b.toString=function(){return a.toString()},b}(function(a,b,d,e,g,h,i){var j,k=f.newEl("rect",{width:a/c+"%",height:b-1,x:d/c+"%",y:e,fill:g,"class":i&&i.length>0?"time-block":"segment"});return h&&k.appendChild(f.newEl("title",{text:h})),k.addEventListener("mouseenter",q),k.addEventListener("mouseleave",r),i&&i.length>0?(j=f.newEl("g"),j.appendChild(k),i.forEach(function(a){a.total>0&&"number"==typeof a.start&&j.appendChild(s(a.total,8,a.start||.001,e,a.colour,a.name+" ("+Math.round(a.start)+"ms - "+Math.round(a.end)+"ms | total: "+Math.round(a.total)+"ms)"))}),j):k}),t=function(){for(var b=f.newEl("g",{"class":"time-scale full-width"}),c=0,d=a/1e3,e=100/d;d>=c;c++){var g=f.newTextEl(c+"sec",j);c>d-.2?(g.setAttribute("x",e*c-.5+"%"),g.setAttribute("text-anchor","end")):g.setAttribute("x",e*c+.5+"%");var h=f.newEl("line",{x1:e*c+"%",y1:"0",x2:e*c+"%",y2:j});b.appendChild(h),b.appendChild(g)}return b},u=function(){var a=f.newEl("g",{transform:"scale(1, 1)","class":"marker-holder"});return d.marks.forEach(function(b,e){var h=f.newEl("g",{"class":"mark-holder"}),i=f.newEl("g",{"class":"line-holder"}),k=b.startTime/c;b.x=k;var l=f.newTextEl(b.name,j+25);l.setAttribute("writing-mode","tb"),l.setAttribute("x",k+"%"),l.setAttribute("stroke",""),i.appendChild(f.newEl("line",{x1:k+"%",y1:0,x2:k+"%",y2:j})),d.marks[e-1]&&b.x-d.marks[e-1].x<1&&(l.setAttribute("x",d.marks[e-1].x+1+"%"),b.x=d.marks[e-1].x+1),i.appendChild(f.newEl("line",{x1:k+"%",y1:j,x2:b.x+"%",y2:j+23})),l.addEventListener("mouseenter",function(){g.addClass(i,"active"),h.parentNode.appendChild(h)}),l.addEventListener("mouseleave",function(){g.removeClass(i,"active")}),h.appendChild(f.newEl("title",{text:b.name+" ("+Math.round(b.startTime)+"ms)"})),h.appendChild(i),h.appendChild(l),a.appendChild(h)}),a};m.appendChild(t()),m.appendChild(u()),e.forEach(function(a,b){var d=a.total||1,e=25*b;m.appendChild(s(d,25,a.start||.001,e,a.colour,a.name+" ("+a.start+"ms - "+a.end+"ms | total: "+a.total+"ms)",a.segments));var g=f.newTextEl(a.name+" ("+a.total+"ms)",e+20);(a.total||1)/c>10&&f.getNodeTextWidth(g)<200?(g.setAttribute("class","inner-label"),g.setAttribute("x",(a.start||.001)/c+.5+"%"),g.setAttribute("width",d/c+"%")):(a.start||.001)/c+d/c<80?g.setAttribute("x",(a.start||.001)/c+d/c+.5+"%"):(g.setAttribute("x",(a.start||.001)/c-.5+"%"),g.setAttribute("text-anchor","end")),g.style.opacity=a.name.match(/js.map$/)?"0.5":"1",n.appendChild(g)}),m.appendChild(n),l.appendChild(g.newTag("h1",{text:"Resource Timing"})),l.appendChild(m),l.appendChild(g.newTag("h3",{text:"Legend"}));var v=g.newTag("div",{"class":"legends-group "});return v.appendChild(i("initiator-type-legend","Block color: Initiator Type",[["css","#afd899"],["iframe","#85b3f2"],["img","#bc9dd6"],["script","#e7bd8c"],["link","#89afe6"],["swf","#4db3ba"],["xmlhttprequest","#e7d98c"]])),v.appendChild(i("navigation-legend","Navigation Timing",[["Redirect","#ffff60"],["App Cache","#1f831f"],["DNS Lookup","#1f7c83"],["TCP","#e58226"],["SSL Negotiation","#c141cd"],["Time to First Byte","#1fe11f"],["Content Download","#1977dd"],["DOM Processing","#9cc"],["DOM Content Loaded","#d888df"],["On Load","#c0c0ff"]])),v.appendChild(i("resource-legend","Resource Timing",[["Stalled/Blocking","#cdcdcd"],["Redirect","#ffff60"],["App Cache","#1f831f"],["DNS Lookup","#1f7c83"],["TCP","#e58226"],["SSL Negotiation","#c141cd"],["Initial Connection (TCP)","#e58226"],["Time to First Byte","#1fe11f"],["Content Download","#1977dd"]])),l.appendChild(v),l};return k(a.loadDuration,a.blocks)},b.exports=h},{"../data":6,"../helpers/dom":7,"../helpers/helpers":8,"../helpers/svg":11}],4:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=c(a("../data")),e=c(a("../helpers/helpers")),f=c(a("../helpers/dom")),g={};g.init=function(){var a,b,c,g,h,i,j,k,l,m,n,o;return a=d.allResourcesCalc.filter(function(a){return 0===a.name.indexOf("http")&&!a.name.match(/js.map$/)}),b=e.getItemCount(a.map(function(a){return a.domain}),"domain"),c=a.filter(function(a){return a.domain.split(".").slice(-2).join(".")===location.host.split(".").slice(-2).join(".")}).length,g=a.filter(function(a){return!e.endsWith(a.domain,document.domain)}).length,h=a.filter(function(a){return a.domain===location.host}).length,i=b.filter(function(a){return e.endsWith(a.domain,location.host.split(".").slice(-2).join("."))&&a.domain!==location.host}).length,d.allResourcesCalc.length>0&&(j=d.allResourcesCalc.filter(function(a){return a.name!==location.href}).sort(function(a,b){return b.duration-a.duration}),k=Math.floor(j.reduceRight(function(a,b){return"number"!=typeof a?a.duration+b.duration:a+b.duration})/j.length)),l=function(a,b,c){c=c||60;var d=f.newTag("dl",{"class":"summary-tile"});return d.appendChild(f.newTag("dt",{childElement:a})),d.appendChild(f.newTag("dd",{childElement:b},"font-size:"+c+"px;")),d},m=function(a,b,c){a.appendChild(f.newTag("dt",{childElement:b})),a.appendChild(f.newTag("dd",{text:c}))},n=f.newTag("section",{"class":"tiles-holder chart-holder"}),[l("Requests",a.length||"0"),l("Domains",b.length||"0"),l(f.combineNodes("Subdomains of ",f.newTag("abbr",{title:"Top Level Domain",text:"TLD"})),i||"0"),l(f.combineNodes("Requests to ",f.newTag("span",{title:location.host,text:"Host"})),h||"0"),l(f.combineNodes(f.newTag("abbr",{title:"Top Level Domain",text:"TLD"}),"& Subdomain Requests"),c||"0"),l("Total",d.perfTiming.loadEventEnd-d.perfTiming.navigationStart+"ms",40),l("Time to First Byte",d.perfTiming.responseStart-d.perfTiming.navigationStart+"ms",40),l(f.newTag("span",{title:"domLoading to domContentLoadedEventStart",text:"DOM Content Loading"}),d.perfTiming.domContentLoadedEventStart-d.perfTiming.domLoading+"ms",40),l(f.newTag("span",{title:"domLoading to loadEventStart",text:"DOM Processing"}),d.perfTiming.domComplete-d.perfTiming.domLoading+"ms",40)].forEach(function(a){n.appendChild(a)}),d.allResourcesCalc.length>0&&(n.appendChild(l(f.newTag("span",{title:j[0].name,text:"Slowest Call"}),f.newTag("span",{title:j[0].name,text:Math.floor(j[0].duration)+"ms"}),40)),n.appendChild(l("Average Call",k+"ms",40))),o=f.newTag("dl",{"class":"summary-tile-appendix"}),m(o,f.newTag("abbr",{title:"Top Level Domain",text:"TLD"},location.host.split(".").slice(-2).join("."))),m(o,f.newTextNode("Host:"),location.host),m(o,f.newTextNode("document.domain:"),document.domain),n.appendChild(o),n},b.exports=g},{"../data":6,"../helpers/dom":7,"../helpers/helpers":8}],5:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=c(a("../data")),e=(c(a("../helpers/helpers")),c(a("../helpers/dom"))),f={};f.init=function(){var a=d.allResourcesCalc.filter(function(a){return 0===a.name.indexOf("http")&&!a.name.match(/js.map$/)}),b=a.reduce(function(a,b){var c,d=a[b.fileType];return d||(d=a[b.fileType]={fileType:b.fileType,count:0,initiatorType:{},requestsToHost:0,requestsToExternal:0}),c=d.initiatorType[b.initiatorType],c||(c=d.initiatorType[b.initiatorType]={initiatorType:b.initiatorType,count:0,requestsToHost:0,requestsToExternal:0}),d.count++,c.count++,b.isRequestToHost?(d.requestsToHost++,c.requestsToHost++):(d.requestsToExternal++,c.requestsToExternal++),a},{}),c=e.newTag("section",{"class":"table-section-holder chart-holder"});return c.appendChild(e.newTag("h1",{text:"Request FileTypes & Initiators"})),c.appendChild(e.tableFactory("filetypes-and-intiators-table",function(a){return["FileType","Count","Count Internal","Count External","Initiator Type","Count by Initiator Type","Initiator Type Internal","Initiator Type External"].forEach(function(b){a.appendChild(e.newTag("th",{text:b,width:b.indexOf("ternal")>0?"12%":""}))}),a},function(a){return Object.keys(b).forEach(function(c){var d=b[c],f=Object.keys(d.initiatorType),g=d.initiatorType[f[0]],h=f.length,i=e.newTag("tr",{"class":"file-type-row "+(d.fileType||"other")+"-light"});[d.fileType,d.count,d.requestsToHost,d.requestsToExternal,g.initiatorType,g.count,g.requestsToHost,g.requestsToExternal].forEach(function(a,b){var c={text:a};4>b&&f.length>1?c.rowSpan=h:b>=4&&(c["class"]=(f[0]||"other")+"-light"),i.appendChild(e.newTag("td",c))}),a.appendChild(i),f.slice(1).forEach(function(b){var c=d.initiatorType[b],f=e.newTag("tr",{"class":"initiator-type-more "+(b||"other")+"-light"});f.appendChild(e.newTag("td",{text:b})),f.appendChild(e.newTag("td",{text:c.count})),f.appendChild(e.newTag("td",{text:c.requestsToHost})),f.appendChild(e.newTag("td",{text:c.requestsToExternal})),a.appendChild(f)})}),a})),c},b.exports=f},{"../data":6,"../helpers/dom":7,"../helpers/helpers":8}],6:[function(a,b){"use strict";var c=function(a){return a&&a.__esModule?a["default"]:a},d=c(a("./helpers/tableLogger")),e=c(a("./helpers/helpers")),f={resources:[],marks:[],measures:[],perfTiming:[],allResourcesCalc:[]},g=!0;if(f.isValid=function(){return g},window.performance&&void 0!==window.performance.getEntriesByType)f.resources=window.performance.getEntriesByType("resource"),f.marks=window.performance.getEntriesByType("mark"),f.measures=window.performance.getEntriesByType("measure");else{if(!window.performance||void 0===window.performance.webkitGetEntriesByType)return alert("Oups, looks like this browser does not support the Resource Timing API\ncheck http://caniuse.com/#feat=resource-timing to see the ones supporting it \n\n"),void(g=!1);f.resources=window.performance.webkitGetEntriesByType("resource"),f.marks=window.performance.webkitGetEntriesByType("mark"),f.measures=window.performance.webkitGetEntriesByType("measure")}return window.performance.timing?(f.perfTiming=window.performance.timing,f.perfTiming.loadEventEnd-f.perfTiming.navigationStart<0?(alert("Page is still loading - please try again when page is loaded."),void(g=!1)):(f.allResourcesCalc=f.resources.filter(function(a){return!a.name.match(/http[s]?\:\/\/(micmro|nurun).github.io\/performance-bookmarklet\/.*/)}).map(function(a){var b,c,d,f=0===a.name.indexOf("http");f?(b=a.name.match(/:\/\/(.[^/]+)([^?]*)\??(.*)/),c=b[2].split("/").pop(),d=c.substr((Math.max(0,c.lastIndexOf("."))||1/0)+1)):(b=["",location.host],d=a.name.split(":")[0]);var g={name:a.name,domain:b[1],initiatorType:a.initiatorType||d||"SourceMap or Not Defined",fileExtension:d||"XHR or Not Defined",loadtime:a.duration,fileType:e.getFileType(d,a.initiatorType),isRequestToHost:b[1]===location.host};for(var h in a)"function"!=typeof a[h]&&(g[h]=a[h]);return a.requestStart&&(g.requestStartDelay=a.requestStart-a.startTime,g.dns=a.domainLookupEnd-a.domainLookupStart,g.tcp=a.connectEnd-a.connectStart,g.ttfb=a.responseStart-a.startTime,g.requestDuration=a.responseStart-a.requestStart),a.secureConnectionStart&&(g.ssl=a.connectEnd-a.secureConnectionStart),g}),d.logTable({name:"All loaded resources",data:f.allResourcesCalc,columns:["name","domain","fileType","initiatorType","fileExtension","loadtime","isRequestToHost","requestStartDelay","dns","tcp","ttfb","requestDuration","ssl"]}),void(b.exports=f))):(alert("Oups, looks like this browser does not support performance timing"),void(g=!1))},{"./helpers/helpers":8,"./helpers/tableLogger":12}],7:[function(a,b){"use strict";var c={};c.newTextNode=function(a){return document.createTextNode(a)},c.newTag=function(a,b,d){b=b||{};var e=document.createElement(a);for(var f in b)"text"!=f&&(e[f]=b[f]);return b.text?e.textContent=b.text:b.childElement&&("object"==typeof b.childElement?b.childElement instanceof NodeList?Array.prototype.slice.call(b.childElement,0).forEach(function(a){e.appendChild(a)}):e.appendChild(b.childElement):e.appendChild(c.newTextNode(b.childElement))),b["class"]&&(e.className=b["class"]),e.style.cssText=d||"",e},c.tableFactory=function(a,b,d){var e=c.newTag("div",{id:a||"","class":"table-holder"}),f=c.newTag("table"),g=c.newTag("thead");return g.appendChild(b(c.newTag("tr"))),f.appendChild(g),f.appendChild(d(c.newTag("tbody"))),e.appendChild(f),e},c.combineNodes=function(a,b){var d=document.createElement("div");return"object"==typeof a?d.appendChild(a):"string"==typeof a&&d.appendChild(c.newTextNode(a)),"object"==typeof b?d.appendChild(b):"string"==typeof b&&d.appendChild(c.newTextNode(b)),d.childNodes},c.addClass=function(a,b){return a.classList?a.classList.add(b):a.setAttribute("class",a.getAttribute("class")+" "+b),a},c.removeClass=function(a,b){return a.classList?a.classList.remove(b):a.setAttribute("class",a.getAttribute("class").replace(new RegExp("(\\s|^)"+b+"(\\s|$)","g"),"$2")),a},b.exports=c},{}],8:[function(a,b){"use strict";var c={};c.getFileType=function(a,b){if(a)switch(a){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"ico":return"image";case"js":return"js";case"css":return"css";case"html":return"html";case"woff":case"woff2":case"ttf":case"eot":case"otf":return"font";case"swf":return"flash";case"map":return"source-map"}if(b)switch(b){case"xmlhttprequest":return"ajax";case"img":return"image";case"script":return"js";case"internal":case"iframe":return"html";default:return"other"}return b},c.getRandomColor=function(a,b,c){for(var d=[a||"0123456789ABCDEF",b||"0123456789ABCDEF",c||"0123456789ABCDEF"],e="#",f=0,g=0;6>g;g++)f=Math.floor(g/2),e+=d[f].split("")[Math.floor(Math.random()*d[f].length)];return e},c.endsWith=function(a,b){return-1!==a.indexOf(b,a.length-b.length)};var d=function(a,b){var c=(parseInt(a.substr(1,2),16)+b).toString(16),d=(parseInt(a.substr(3,2),16)+b).toString(16),e=(parseInt(a.substr(5,2),16)+b).toString(16);return"#"+c+d+e};c.getInitiatorTypeColour=function(a,b,c){var e=b||"#bebebe";switch(a){case"css":e="#afd899";break;case"iframe":e="#85b3f2";break;case"img":e="#bc9dd6";break;case"script":e="#e7bd8c";break;case"link":e="#89afe6";break;case"swf":e="#4db3ba";break;case"font":e="#e96859";break;case"xmlhttprequest":e="#e7d98c"}return c===!0?d(e,-5):e},c.getFileTypeColour=function(a,b,c){var e=b||"#bebebe";switch(a){case"css":e="#afd899";break;case"html":e="#85b3f2";break;case"image":e="#bc9dd6";break;case"js":e="#e7bd8c";break;case"link":e="#89afe6";break;case"swf":e="#4db3ba";break;case"font":e="#e96859";break;case"ajax":e="#e7d98c"}return c===!0?d(e,-5):e},c.getItemCount=function(a,b){var c,d={},e=[];a.forEach(function(a){d[a]=d[a]?d[a]+1:1});for(var f in d)c={},c[b||"key"]=f,c.count=d[f],e.push(c);return e.sort(function(a,b){return a.count<b.count?1:-1})},b.exports=c},{}],9:[function(a,b){"use strict";var c,d,e,f,g=function(a){return a&&a.__esModule?a["default"]:a},h=g(a("../helpers/dom")),i=a("../helpers/style").style,j={},k=function(){if(e)for(f=d.getElementById("perfbook-content");f.firstChild;)f.removeChild(f.firstChild);else{e=h.newTag("div",{id:"perfbook-holder"}),f=h.newTag("div",{id:"perfbook-content"}),window.outputContent;var a=h.newTag("button",{"class":"perfbook-close",text:"close"});a.addEventListener("click",function(){c.parentNode.removeChild(c)}),e.appendChild(a),e.appendChild(f)}},l=function(a){f.appendChild(a)};j.setup=function(a){c=document.getElementById("perfbook-iframe");var b=function(){k(),a(l),d.body.appendChild(e),c.style.height=e.clientHeight+"px"};c?(d=c.contentWindow.document,e=d.getElementById("perfbook-holder"),k(),a(l),b()):(c=h.newTag("iframe",{id:"perfbook-iframe",onload:function(){d=c.contentWindow.document;var a=h.newTag("style",{type:"text/css",text:i});d.head.appendChild(a),b()}},"position:absolute; top:1%; right:1%; margin-bottom:1em; left:1%; z-index: 9999; width:98%; z-index: 9999; border:0; box-shadow:0 0 25px 0 rgba(0,0,0,0.5); background:#fff;"),document.body.appendChild(c))},j.getOutputIFrame=function(){return d},b.exports=j},{"../helpers/dom":7,"../helpers/style":10}],10:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d="body {overflow: hidden; background: #fff; font:normal 12px/18px sans-serif; color:#333;} * {box-sizing:border-box;} svg {font:normal 12px/18px sans-serif;} th {text-align: left;} #perfbook-holder {overflow: hidden; width:100%; padding:1em 2em 3em;} #perfbook-content {position:relative;} .perfbook-close {position:absolute; top:0; right:0; padding:1em; z-index:1; background:transparent; border:0; cursor:pointer;} .full-width {width:100%;} .chart-holder {margin: 5em 0;} h1 {font:bold 18px/18px sans-serif; margin:1em 0; color:#666;} .text-right {text-align: right;} .text-left {text-align: left;} .css {background: #afd899;} .iframe, .html, .internal {background: #85b3f2;} .img, .image {background: #bc9dd6;} .script, .js {background: #e7bd8c;} .link {background: #89afe6;} .swf, .flash {background: #4db3ba;} .font {background: #e96859;} .xmlhttprequest, .ajax {background: #e7d98c;} .other {background: #bebebe;} .css-light {background: #b9cfa0;} .iframe-light, .html-light, .internal-light {background: #c2d9f9;} .img-light, .image-light {background: #deceeb;} .script-light, .js-light {background: #f3dec6;} .link-light {background: #c4d7f3;} .swf-light, .flash-light {background: #a6d9dd;} .font-light {background: #f4b4ac;} .xmlhttprequest-light, .ajax-light {background: #f3ecc6;} .other-light {background: #dfdfdf;} .tiles-holder {margin: 2em -18px 2em 0; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-flow: row wrap; flex-flow: row wrap; } .summary-tile { flex-grow: 1; width:250px; background:#ddd; padding: 1em; margin:0 18px 1em 0; color:#666; text-align:center;} .summary-tile dt {font-weight:bold; font-size:16px; display:block; line-height:1.2em; min-height:2.9em; padding:0 0 0.5em;} .summary-tile dd {font-weight:bold; line-height:60px; margin:0;} .summary-tile-appendix {float:left; clear:both; width:100%; font-size:10px; line-height:1.1em; color:#666;} .summary-tile-appendix dt {float:left; clear:both;} .summary-tile-appendix dd {float:left; margin:0 0 0 1em;} .pie-charts-holder {margin-right: -72px; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-flow: row wrap; flex-flow: row wrap;} .pie-chart-holder {flex-grow: 1; width:350px; max-width: 600px; margin: 0 72px 0 0;} .pie-chart-holder h1 {min-height:2em;} .pie-chart {width:100%;} .table-holder {overflow-x:auto} .table-holder table {float:left; width:100%; font-size:12px; line-height:18px;} .table-holder th, .table-holder td {line-height: 1em; margin:0; padding:0.25em 0.5em 0.25em 0;} #filetypes-and-intiators-table {margin: 2em 0 5em;} #filetypes-and-intiators-table table {vertical-align: middle; border-collapse: collapse;} #filetypes-and-intiators-table td {padding:0.5em; border-right: solid 1px #fff;} #filetypes-and-intiators-table td:last-child {padding-right: 0; border-right:0;} #filetypes-and-intiators-table .file-type-row td {border-top: solid 10px #fff;} #filetypes-and-intiators-table .file-type-row:first-child td {border-top: none;} .water-fall-holder {fill:#ccc;} .water-fall-chart {width:100%; background:#f0f5f0;} .water-fall-chart .marker-holder {width:100%;} .water-fall-chart .line-holder {stroke-width:1; stroke: #a971c5; stroke-opacity:0.5;} .water-fall-chart .line-holder.active {stroke: #69009e; stroke-width:2; stroke-opacity:1;} .water-fall-chart .labels {width:100%;} .water-fall-chart .labels .inner-label {pointer-events: none;} .water-fall-chart .time-block.active {opacity: 0.8;} .water-fall-chart .line-end, .water-fall-chart .line-start {display: none; stroke-width:1; stroke-opacity:0.5; stroke: #000;} .water-fall-chart .line-end.active, .water-fall-chart .line-start.active {display: block;} .time-scale line {stroke:#0cc; stroke-width:1;} .time-scale text {font-weight:bold;} .navigation-timing {} .legends-group { display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-flow: row wrap; flex-flow: row wrap; } .legends-group .legend-holder { flex-grow: 1; width:250px; padding:0 1em 1em; } .legends-group .legend-holder h4 { margin: 0; padding: 0; } .legend dt {float: left; clear: left; padding: 0 0 0.5em;} .legend dd {float: left; display: inline-block; margin: 0 1em; line-height: 1em;} .legend .colorBoxHolder span {display: inline-block; width: 15px; height: 1em;}";

c.style=d},{}],11:[function(a,b){"use strict";var c=a("../helpers/iFrameHolder").getOutputIFrame,d={};d.newEl=function(a,b,c){var d=document.createElementNS("http://www.w3.org/2000/svg",a);b=b||{};for(var e in b)"text"!=e&&d.setAttributeNS(null,e,b[e]);return d.textContent=b.text||"",d.style.cssText=c||"",d},d.newTextEl=function(a,b,c){return d.newEl("text",{fill:"#111",y:b,text:a},(c||"")+" text-shadow:0 0 4px #fff;")},d.getNodeTextWidth=function(a){var b=d.newEl("svg:svg",{},"visibility:hidden;");b.appendChild(a),c().body.appendChild(b);var e=a.getBBox().width;return b.parentNode.removeChild(b),e},b.exports=d},{"../helpers/iFrameHolder":9}],12:[function(a,b){"use strict";var c={};c.logTable=function(a){a.data.length>0&&console.table&&(console.log("\n\n\n"+a.name+":"),console.table(a.data,a.columns))},c.logTables=function(a){a.forEach(c.logTable)},b.exports=c},{}],13:[function(a){"use strict";var b=function(a){return a&&a.__esModule?a["default"]:a},c=b(a("./data")),d=b(a("./helpers/iFrameHolder")),e=b(a("./components/summaryTiles")),f=b(a("./components/navigationTimeline")),g=b(a("./components/pieChart")),h=b(a("./components/table")),i=b(a("./components/resourcesTimeline"));if("about:"!==location.protocol&&c.isValid()){var j=function(a){[e.init(),f.init(),g.init(),h.init(),i.init()].forEach(function(b){a(b)})};d.setup(j)}},{"./components/navigationTimeline":1,"./components/pieChart":2,"./components/resourcesTimeline":3,"./components/summaryTiles":4,"./components/table":5,"./data":6,"./helpers/iFrameHolder":9}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13]);